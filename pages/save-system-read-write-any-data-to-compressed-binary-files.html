<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <link href="https://www.epicgames.com/tos"/>
  <title>
   Save System, Read &amp; Write Any Data to Compressed Binary Files - Old UE4 Wiki
  </title>
  <link href="../styles.css" rel="stylesheet"/>
 </head>
 <body>
  <nav id="top-nav">
   <a href="../index.html" title="Home">
    Home
   </a>
  </nav>
  <div class="mw-body" id="content" role="main">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    Save System, Read &amp; Write Any Data to Compressed Binary Files
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From Epic Wiki
    </div>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <p>
      </p>
      <div class="toc" id="toc">
       <div class="toctitle">
        <h2>
         Contents
        </h2>
       </div>
       <ul>
        <li class="toclevel-1 tocsection-1">
         <a href="#Custom_Save_System_To_Binary_Files">
          <span class="tocnumber">
           1
          </span>
          <span class="toctext">
           Custom Save System To Binary Files
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-2">
           <a href="#Pre-Summary">
            <span class="tocnumber">
             1.1
            </span>
            <span class="toctext">
             Pre-Summary
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-3">
           <a href="#Two_Levels_of_Conversions">
            <span class="tocnumber">
             1.2
            </span>
            <span class="toctext">
             Two Levels of Conversions
            </span>
           </a>
           <ul>
            <li class="toclevel-3 tocsection-4">
             <a href="#Binary_Array_.3D_TArray.3Cuint8.3E">
              <span class="tocnumber">
               1.2.1
              </span>
              <span class="toctext">
               Binary Array = TArray&lt;uint8&gt;
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-5">
             <a href="#Step_1:_Variable_Format_-.3E_Binary_Array">
              <span class="tocnumber">
               1.2.2
              </span>
              <span class="toctext">
               Step 1: Variable Format -&gt; Binary Array
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-6">
             <a href="#Step_2:_Binary_Array_-.3E_Hard_Disk">
              <span class="tocnumber">
               1.2.3
              </span>
              <span class="toctext">
               Step 2: Binary Array -&gt; Hard Disk
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-7">
             <a href="#Optional_Step_3:_Compressed_Binary">
              <span class="tocnumber">
               1.2.4
              </span>
              <span class="toctext">
               Optional Step 3: Compressed Binary
              </span>
             </a>
            </li>
           </ul>
          </li>
          <li class="toclevel-2 tocsection-8">
           <a href="#Core_Header_Files">
            <span class="tocnumber">
             1.3
            </span>
            <span class="toctext">
             Core Header Files
            </span>
           </a>
           <ul>
            <li class="toclevel-3 tocsection-9">
             <a href="#Archive.h_and_ArchiveBase.h">
              <span class="tocnumber">
               1.3.1
              </span>
              <span class="toctext">
               Archive.h and ArchiveBase.h
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-10">
             <a href="#FileManager.h">
              <span class="tocnumber">
               1.3.2
              </span>
              <span class="toctext">
               FileManager.h
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-11">
             <a href="#BufferArchive">
              <span class="tocnumber">
               1.3.3
              </span>
              <span class="toctext">
               BufferArchive
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-12">
             <a href="#FMemoryReader">
              <span class="tocnumber">
               1.3.4
              </span>
              <span class="toctext">
               FMemoryReader
              </span>
             </a>
            </li>
           </ul>
          </li>
          <li class="toclevel-2 tocsection-13">
           <a href="#The_.3C.3C_Operator">
            <span class="tocnumber">
             1.4
            </span>
            <span class="toctext">
             The &lt;&lt; Operator
            </span>
           </a>
           <ul>
            <li class="toclevel-3 tocsection-14">
             <a href="#Variable_-.3E_Binary">
              <span class="tocnumber">
               1.4.1
              </span>
              <span class="toctext">
               Variable -&gt; Binary
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-15">
             <a href="#Binary_-.3E_Variable">
              <span class="tocnumber">
               1.4.2
              </span>
              <span class="toctext">
               Binary -&gt; Variable
              </span>
             </a>
            </li>
           </ul>
          </li>
          <li class="toclevel-2 tocsection-16">
           <a href="#The_Hardest_Concept_of_UE4_C.2B.2B_Custom_Save_System">
            <span class="tocnumber">
             1.5
            </span>
            <span class="toctext">
             The Hardest Concept of UE4 C++ Custom Save System
            </span>
           </a>
           <ul>
            <li class="toclevel-3 tocsection-17">
             <a href="#Writing_Your_Function_to_Be_Two-Way">
              <span class="tocnumber">
               1.5.1
              </span>
              <span class="toctext">
               Writing Your Function to Be Two-Way
              </span>
             </a>
             <ul>
              <li class="toclevel-4 tocsection-18">
               <a href="#The_order_of_how_you_write_out_data_to_binary_file_must_be_the_exact_order_that_you_read_it_back_in.21">
                <span class="tocnumber">
                 1.5.1.1
                </span>
                <span class="toctext">
                 The order of how you write out data to binary file must be the exact order that you read it back in!
                </span>
               </a>
              </li>
             </ul>
            </li>
           </ul>
          </li>
          <li class="toclevel-2 tocsection-19">
           <a href="#">
            <span class="tocnumber">
             1.6
            </span>
            <span class="toctext">
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-20">
           <a href="#SaveLoadData:_Two-Way_Save_System_Function">
            <span class="tocnumber">
             1.7
            </span>
            <span class="toctext">
             SaveLoadData: Two-Way Save System Function
            </span>
           </a>
           <ul>
            <li class="toclevel-3 tocsection-21">
             <a href="#Saving">
              <span class="tocnumber">
               1.7.1
              </span>
              <span class="toctext">
               Saving
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-22">
             <a href="#Loading">
              <span class="tocnumber">
               1.7.2
              </span>
              <span class="toctext">
               Loading
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-23">
             <a href="#Summary">
              <span class="tocnumber">
               1.7.3
              </span>
              <span class="toctext">
               Summary
              </span>
             </a>
            </li>
           </ul>
          </li>
          <li class="toclevel-2 tocsection-24">
           <a href="#My_Binary_Save_System_Functions_For_You">
            <span class="tocnumber">
             1.8
            </span>
            <span class="toctext">
             My Binary Save System Functions For You
            </span>
           </a>
           <ul>
            <li class="toclevel-3 tocsection-25">
             <a href="#Saving_Binary_Files">
              <span class="tocnumber">
               1.8.1
              </span>
              <span class="toctext">
               Saving Binary Files
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-26">
             <a href="#Loading_Binary_Files">
              <span class="tocnumber">
               1.8.2
              </span>
              <span class="toctext">
               Loading Binary Files
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-27">
             <a href="#Saving_Compressed">
              <span class="tocnumber">
               1.8.3
              </span>
              <span class="toctext">
               Saving Compressed
              </span>
             </a>
            </li>
            <li class="toclevel-3 tocsection-28">
             <a href="#Loading_Compressed">
              <span class="tocnumber">
               1.8.4
              </span>
              <span class="toctext">
               Loading Compressed
              </span>
             </a>
            </li>
           </ul>
          </li>
          <li class="toclevel-2 tocsection-29">
           <a href="#_2">
            <span class="tocnumber">
             1.9
            </span>
            <span class="toctext">
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-30">
           <a href="#Overloading_the_.3C.3C_Operator">
            <span class="tocnumber">
             1.10
            </span>
            <span class="toctext">
             Overloading the &lt;&lt; Operator
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-31">
           <a href="#Crashes.3F">
            <span class="tocnumber">
             1.11
            </span>
            <span class="toctext">
             Crashes?
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-32">
           <a href="#Enjoy.21">
            <span class="tocnumber">
             1.12
            </span>
            <span class="toctext">
             Enjoy!
            </span>
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </div>
      <h1>
       <span class="mw-headline" id="Custom_Save_System_To_Binary_Files">
        Custom Save System To Binary Files
       </span>
      </h1>
      <p>
       Original Author:
       (
       )
      </p>
      <p>
       Dear Community,
      </p>
      <p>
       <b>
        Using what I explain in this tutorial you can write your own custom save systems wherein you
       </b>
      </p>
      <ul>
       <li>
        write out literally any game-related data you want
       </li>
       <li>
        read back in this data any time you want, from hard-disk
       </li>
       <li>
        compress (ZLIB) these files to minimize usage of the end-user's computer hard disk space
       </li>
      </ul>
      <p>
       I've already been writing out and loading back in levels that are zipped binary data files for my in-game editor.
      </p>
      <p>
       <br/>
       <b>
        I am currently able to save literally any custom data I want, including dynamic arrays, for all my custom classes.
       </b>
      </p>
      <p>
       <br/>
       I've developed a streamlined method for doing all this by overloading a specific UE4 C++ operator, so yay thank you thank you Epic for C++ access!
      </p>
      <p>
       <br/>
      </p>
      <h2>
       <span class="mw-headline" id="Pre-Summary">
        Pre-Summary
       </span>
      </h2>
      <p>
       There's a lot of concepts in this tutorial, try out each part and get it working before moving on to the next
      </p>
      <p>
       Just copy-pasting code will not work here, you need to understand the basics, because all I am presenting is the basics,
      </p>
      <p>
       and you must apply the basics to your own project's needs.
      </p>
      <p>
       After all, this is about a save system for any arbitrary project-specific custom class data :)
      </p>
      <p>
       <br/>
      </p>
      <h2>
       <span class="mw-headline" id="Two_Levels_of_Conversions">
        Two Levels of Conversions
       </span>
      </h2>
      <p>
       When you want to save custom variable data for your custom save system,
      </p>
      <p>
       there are TWO major steps involved
      </p>
      <p>
       <b>
        Step 1
       </b>
       = variable format -&gt; binary array (serialized by Archive class of UE4)
      </p>
      <p>
       <b>
        Step 2
       </b>
       = Binary array -&gt; hard disk
      </p>
      <p>
       These steps are then done in reverse to read back in data from hard disk.
      </p>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="Binary_Array_.3D_TArray.3Cuint8.3E">
        Binary Array = TArray&lt;uint8&gt;
       </span>
      </h3>
      <p>
       Binary data is represented in a very UE4 C++ friendly looking way as a dynamic array of uint8.
      </p>
      <p>
       So any time you see TArray&lt;uint8&gt; in my code in this tutorial, that literally means "Binary Array" from UE4 C++ standpoint.
      </p>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="Step_1:_Variable_Format_-.3E_Binary_Array">
        Step 1: Variable Format -&gt; Binary Array
       </span>
      </h3>
      <p>
       An int32 takes up 4 bytes, as does a float.
      </p>
      <p>
       An int64 takes up 8 bytes.
      </p>
      <p>
       An FName takes up 8 bytes.
      </p>
      <p>
       An FString takes up 16 bytes.
      </p>
      <p>
       An FVector takes up 3 x float bytes.
      </p>
      <p>
       etc.
      </p>
      <p>
       So even a single int32 is actually an array of bytes, not a single entry.
      </p>
      <p>
       Now let's suppose your save system needs to store
      </p>
      <ul>
       <li>
        3 FVector's
       </li>
      </ul>
      <ul>
       <li>
        40 int32's
       </li>
      </ul>
      <ul>
       <li>
        20 FName's
       </li>
      </ul>
      <p>
       Do all the math and this is a lot of bytes!
      </p>
      <p>
       3 x 3 x 4  = 36
      </p>
      <p>
       40 x 4 = 160
      </p>
      <p>
       20 x 8 = 160
      </p>
      <p>
       356
      </p>
      <p>
       So this means that before your data leaves UE4 and goes to hard disk, you need a TArray&lt;uint8&gt; that has 356 entries.
      </p>
      <h3>
       <span class="mw-headline" id="Step_2:_Binary_Array_-.3E_Hard_Disk">
        Step 2: Binary Array -&gt; Hard Disk
       </span>
      </h3>
      <p>
       UE4 C++ gives you functions via FileManager.h to write out TArray&lt;uint8&gt; to hard disk!
      </p>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="Optional_Step_3:_Compressed_Binary">
        Optional Step 3: Compressed Binary
       </span>
      </h3>
      <p>
       UE4 gives you functionality via Archive.h to compress a TArray&lt;uint8&gt; before sending it to the FileManager
      </p>
      <p>
       C++ Code For You
      </p>
      <p>
       Below I am giving you the functions that I use to to read and write binary files of any custom data I choose
      </p>
      <p>
       <br/>
      </p>
      <h2>
       <span class="mw-headline" id="Core_Header_Files">
        Core Header Files
       </span>
      </h2>
      <h3>
       <span class="mw-headline" id="Archive.h_and_ArchiveBase.h">
        Archive.h and ArchiveBase.h
       </span>
      </h3>
      <p>
       See Archive.h and ArchiveBase.h for all the info you need about getting from your varibles and custom class data to binary format (serialized data).
      </p>
      <h3>
       <span class="mw-headline" id="FileManager.h">
        FileManager.h
       </span>
      </h3>
      <p>
       All the functions you need to
      </p>
      <ul>
       <li>
        create directories
       </li>
       <li>
        delete directories
       </li>
       <li>
        create files
       </li>
       <li>
        delete files
       </li>
       <li>
        get a listing of all files in a given path
       </li>
       <li>
        get a listing of all folders in a given path
       </li>
       <li>
        get the age of a file
       </li>
      </ul>
      <p>
       and more are found in FileManager.h
      </p>
      <p>
       You access these functions from anywhere using
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">GFileManager</span><span class="p">)</span> <span class="n">GFileManager</span><span class="o">-&gt;</span><span class="n">TheFunction</span><span class="p">()</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="BufferArchive">
        BufferArchive
       </span>
      </h3>
      <p>
       The buffer archive is both a binary array (TArray&lt;uint8&gt;), and a MemoryWriter
      </p>
      <p>
       <b>
        Archive.h
       </b>
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="cm">/**</span>
<span class="cm"> * Buffer archiver.</span>
<span class="cm"> */</span>
<span class="k">class</span> <span class="nc">FBufferArchive</span> <span class="o">:</span> <span class="k">public</span> <span class="n">FMemoryWriter</span><span class="p">,</span> <span class="k">public</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">uint8</span><span class="o">&gt;</span>
<span class="p">{</span>
</pre>
      </div>
      <p>
       Because of this multiple-inheritance, the BufferArchive is my preferred way to write data to binary file.
      </p>
      <p>
       As my code will show, because the GFileManager wants to receive a TArray&lt;uint8&gt;, not a MemoryArchive.
      </p>
      <p>
       Review my Steps 1 and 2 to see why this is such an awesome class. :)
      </p>
      <p>
       Thanks UE4 Devs!
      </p>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="FMemoryReader">
        FMemoryReader
       </span>
      </h3>
      <p>
       To read Data back from a binary array, that is retrieved by the FileManager, you need a MemoryReader
      </p>
      <p>
       <b>
        Archive.h
       </b>
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="cm">/**</span>
<span class="cm"> * Archive for reading arbitrary data from the specified memory location</span>
<span class="cm"> */</span>
<span class="k">class</span> <span class="nc">FMemoryReader</span> <span class="o">:</span> <span class="k">public</span> <span class="n">FMemoryArchive</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
</pre>
      </div>
      <h2>
       <span class="mw-headline" id="The_.3C.3C_Operator">
        The &lt;&lt; Operator
       </span>
      </h2>
      <p>
       The BufferArchive/Binary Array needs to retrieve your game's variable data, how do you tell it what you want stored as binary?
      </p>
      <p>
       The &lt;&lt; operator!
      </p>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="Variable_-.3E_Binary">
        Variable -&gt; Binary
       </span>
      </h3>
      <p>
       Here's how you would put an FVector into a BufferArchive to then be saved to hard disk.
      </p>
      <p>
       //in player controller class
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="n">FBufferArchive</span> <span class="n">ToBinary</span><span class="p">;</span>
<span class="n">ToBinary</span> <span class="o">&lt;&lt;</span> <span class="n">GetPawn</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetActorLocation</span><span class="p">();</span> <span class="c1">//save player location to hard disk</span>

<span class="c1">//save ToBinary to hard disk using File Manager, </span>
<span class="c1">//see complete code samples below</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="Binary_-.3E_Variable">
        Binary -&gt; Variable
       </span>
      </h3>
      <p>
       Here's how you would retrieve an FVector from a TArray&lt;uint8&gt; as retrieved by GFileManager.
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">//TheBinaryArray was already obtained from FileManager, </span>
<span class="c1">//see code below for full examples</span>

<span class="c1">//need to supply a variable to be filled with the data</span>
<span class="n">FVector</span> <span class="n">ToBeFilledWithData</span><span class="p">;</span>

<span class="n">FMemoryReader</span> <span class="n">Ar</span> <span class="o">=</span> <span class="n">FMemoryReader</span><span class="p">(</span><span class="n">TheBinaryArray</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span> <span class="c1">//true, free data after done</span>
<span class="n">Ar</span><span class="p">.</span><span class="n">Seek</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">//make sure we are at the beginning</span>

<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">ToBeFilledWithData</span><span class="p">;</span>
</pre>
      </div>
      <h2>
       <span class="mw-headline" id="The_Hardest_Concept_of_UE4_C.2B.2B_Custom_Save_System">
        The Hardest Concept of UE4 C++ Custom Save System
       </span>
      </h2>
      <p>
       Compare these two lines
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="n">ToBinary</span> <span class="o">&lt;&lt;</span> <span class="n">GetPawn</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetActorLocation</span><span class="p">();</span>
<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">ToBeFilledWithData</span><span class="p">;</span>
</pre>
      </div>
      <p>
       The hardest concept for me about the UE4 archive system was the fact that the &lt;&lt; operator could mean
      </p>
      <p>
       - getting data out of the archive and putting it into the variable
      </p>
      <p>
       or
      </p>
      <p>
       - putting data from the variable into the archived binary format
      </p>
      <p>
       depending on the context!
      </p>
      <p>
       <br/>
       So that's why I recommend you name your BufferArchive something like ToBinary,
      </p>
      <p>
       and your MemoryReader something
       <b>
        totally different
       </b>
       ,
      </p>
      <p>
       you can only discern the difference between writing to binary and reading from binary
      </p>
      <p>
       based on the context as you show it in your code, as the &lt;&lt; operator will tell you nothing from a simple glance.
      </p>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="Writing_Your_Function_to_Be_Two-Way">
        Writing Your Function to Be Two-Way
       </span>
      </h3>
      <p>
       The critical advantage of this system though is that you can write a single function that works both ways.
      </p>
      <p>
       So you can write a single function that loads data from file, or saves to file.
      </p>
      <p>
       But why would you want this?
      </p>
      <p>
       Because:
      </p>
      <h4>
       <span class="mw-headline" id="The_order_of_how_you_write_out_data_to_binary_file_must_be_the_exact_order_that_you_read_it_back_in.21">
        The order of how you write out data to binary file must be the exact order that you read it back in!
       </span>
      </h4>
      <p>
       The computer does not have any way of knowing, nor does UE4, what the correct order of variable data should be.
      </p>
      <p>
       You are responsible for telling the computer and UE4 to read data back in in the same order it was written out to file.
      </p>
      <p>
       Thus, having a single function that both reads and writes, using the multi-purpose &lt;&lt; operator, is the safest thing you can do to ensure consistency of writing/reading binary data.
      </p>
      <h2>
       <span class="mw-headline" id="">
       </span>
      </h2>
      <h2>
       <span class="mw-headline" id="SaveLoadData:_Two-Way_Save_System_Function">
        SaveLoadData: Two-Way Save System Function
       </span>
      </h2>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="err">'''</span><span class="p">.</span><span class="n">h</span><span class="err">'''</span>

<span class="c1">//FArchive is shared base class for FBufferArchive and FMemoryReader</span>
<span class="kt">void</span> <span class="n">SaveLoadData</span><span class="p">(</span><span class="n">FArchive</span><span class="o">&amp;</span> <span class="n">Ar</span><span class="p">,</span> <span class="n">int32</span><span class="o">&amp;</span> <span class="n">SaveDataInt32</span><span class="p">,</span> <span class="n">FVector</span><span class="o">&amp;</span> <span class="n">SaveDataVector</span><span class="p">,</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">FRotator</span><span class="o">&gt;&amp;</span> <span class="n">SaveDataRotatorArray</span><span class="p">);</span>

<span class="err">'''</span><span class="p">.</span><span class="n">cpp</span><span class="err">'''</span>

<span class="c1">//I am using controller class for convenience, use any class you want</span>

<span class="c1">//SaveLoadData</span>
<span class="kt">void</span> <span class="n">YourControllerClass</span><span class="o">::</span><span class="n">SaveLoadData</span><span class="p">(</span><span class="n">FArchive</span><span class="o">&amp;</span> <span class="n">Ar</span><span class="p">,</span>
  <span class="n">int32</span><span class="o">&amp;</span> <span class="n">SaveDataInt32</span><span class="p">,</span>
  <span class="n">FVector</span><span class="o">&amp;</span> <span class="n">SaveDataVector</span><span class="p">,</span>
  <span class="n">TArray</span><span class="o">&lt;</span><span class="n">FRotator</span><span class="o">&gt;&amp;</span> <span class="n">SaveDataRotatorArray</span>
<span class="p">)</span>
<span class="p">{</span>
	<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">SaveDataInt32</span><span class="p">;</span>
	<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">SaveDataVector</span><span class="p">;</span>
	<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">SaveDataRotatorArray</span><span class="p">;</span>
<span class="p">}</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="Saving">
        Saving
       </span>
      </h3>
      <p>
       Make a BufferArchive and pass it in, it is a Binary Array and also an FArchive
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="n">FBufferArchive</span> <span class="n">ToBinary</span><span class="p">;</span>
<span class="n">SaveLoadData</span><span class="p">(</span><span class="n">ToBinary</span><span class="p">,</span><span class="n">NumGemsCollected</span><span class="p">,</span><span class="n">PlayerLocation</span><span class="p">,</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">);</span>
<span class="c1">//save the binary array / FBufferArchive to hard disk, see below</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="Loading">
        Loading
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">// TheBinaryArray already retrieved from file, see full code sample</span>
<span class="n">FMemoryReader</span> <span class="n">FromBinary</span> <span class="o">=</span> <span class="n">FMemoryReader</span><span class="p">(</span><span class="n">TheBinaryArray</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span> <span class="c1">//true, free data after done</span>
<span class="n">FromBinary</span><span class="p">.</span><span class="n">Seek</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">SaveLoadData</span><span class="p">(</span><span class="n">FromBinary</span><span class="p">,</span><span class="n">NumGemsCollected</span><span class="p">,</span><span class="n">PlayerLocation</span><span class="p">,</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">);</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="Summary">
        Summary
       </span>
      </h3>
      <p>
       Use this setup to avoid crashes due to reading data not in same order that you wrote it to disk!
      </p>
      <p>
       this two way functionality of UE4 &lt;&lt; operator saves the day!
      </p>
      <p>
       Thanks Epic Devs!
      </p>
      <h2>
       <span class="mw-headline" id="My_Binary_Save_System_Functions_For_You">
        My Binary Save System Functions For You
       </span>
      </h2>
      <p>
       Below I am giving you the functions that I use to save/load binary files!
      </p>
      <h3>
       <span class="mw-headline" id="Saving_Binary_Files">
        Saving Binary Files
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="kt">bool</span> <span class="n">ControllerClass</span><span class="o">::</span><span class="n">SaveGameDataToFile</span><span class="p">(</span><span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">FullFilePath</span><span class="p">,</span> <span class="n">FBufferArchive</span><span class="o">&amp;</span> <span class="n">ToBinary</span><span class="p">)</span>
<span class="p">{</span>
	<span class="c1">//note that the supplied FString must be the entire Filepath</span>
	<span class="c1">// 	if writing it out yourself in C++ make sure to use the \\</span>
<span class="c1">	// 	for example:</span>
	
	<span class="c1">// 	FString SavePath = "C:\\MyProject\\MySaveDir\\mysavefile.save";</span>
	
	<span class="c1">//Step 1: Variable Data -&gt; Binary</span>
	
	<span class="c1">//following along from above examples</span>
	<span class="n">SaveLoadData</span><span class="p">(</span><span class="n">ToBinary</span><span class="p">,</span><span class="n">NumGemsCollected</span><span class="p">,</span><span class="n">PlayerLocation</span><span class="p">,</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">);</span> 
	<span class="c1">//presumed to be global var data, </span>
	<span class="c1">//could pass in the data too if you preferred</span>

	<span class="c1">//No Data</span>
	<span class="k">if</span><span class="p">(</span><span class="n">ToBinary</span><span class="p">.</span><span class="n">Num</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
	<span class="c1">//~</span>
	
	<span class="c1">//Step 2: Binary to Hard Disk</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">FFileHelper</span><span class="o">::</span><span class="n">SaveArrayToFile</span><span class="p">(</span><span class="n">ToBinary</span><span class="p">,</span> <span class="o">*</span> <span class="n">FullFilePath</span><span class="p">))</span> 
	<span class="p">{</span>
		<span class="c1">// Free Binary Array 	</span>
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
		
		<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"Save Success!"</span><span class="p">);</span>
		<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="c1">// Free Binary Array 	</span>
	<span class="n">ToBinary</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
	<span class="n">ToBinary</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
	
	<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"File Could Not Be Saved!"</span><span class="p">);</span>
	
	<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre>
      </div>
      <p>
       FBufferArchive
      </p>
      <h3>
       <span class="mw-headline" id="Loading_Binary_Files">
        Loading Binary Files
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">//I am using the sample save data from above examples as the data being loaded</span>
<span class="kt">bool</span> <span class="n">ControllerClass</span><span class="o">::</span><span class="n">LoadGameDataFromFile</span><span class="p">(</span>
	<span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">FullFilePath</span><span class="p">,</span> 
	<span class="n">int32</span><span class="o">&amp;</span> <span class="n">SaveDataInt32</span><span class="p">,</span>
	<span class="n">FVector</span><span class="o">&amp;</span> <span class="n">SaveDataVector</span><span class="p">,</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">FRotator</span><span class="o">&gt;&amp;</span> <span class="n">SaveDataRotatorArray</span>
<span class="p">){</span>
	<span class="c1">//Load the data array,</span>
	<span class="c1">// 	you do not need to pre-initialize this array,</span>
	<span class="c1">//		UE4 C++ is awesome and fills it </span>
	<span class="c1">//		with whatever contents of file are, </span>
	<span class="c1">//		and however many bytes that is</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">uint8</span><span class="o">&gt;</span> <span class="n">TheBinaryArray</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">FFileHelper</span><span class="o">::</span><span class="n">LoadFileToArray</span><span class="p">(</span><span class="n">TheBinaryArray</span><span class="p">,</span> <span class="o">*</span><span class="n">FullFilePath</span><span class="p">))</span>
	<span class="p">{</span>
		<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"FFILEHELPER:&gt;&gt; Invalid File"</span><span class="p">);</span>
		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
		<span class="c1">//~~</span>
	<span class="p">}</span>

	<span class="c1">//Testing</span>
	<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"Loaded File Size"</span><span class="p">);</span>
	<span class="n">ClientMessage</span><span class="p">(</span><span class="n">FString</span><span class="o">::</span><span class="n">FromInt</span><span class="p">(</span><span class="n">TheBinaryArray</span><span class="p">.</span><span class="n">Num</span><span class="p">()));</span>
	
	<span class="c1">//File Load Error</span>
	<span class="k">if</span><span class="p">(</span><span class="n">TheBinaryArray</span><span class="p">.</span><span class="n">Num</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
	
	<span class="c1">//~</span>
	<span class="c1">//		  Read the Data Retrieved by GFileManager</span>
	<span class="c1">//~</span>
	
	<span class="n">FMemoryReader</span> <span class="n">FromBinary</span> <span class="o">=</span> <span class="n">FMemoryReader</span><span class="p">(</span><span class="n">TheBinaryArray</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span> <span class="c1">//true, free data after done</span>
	<span class="n">FromBinary</span><span class="p">.</span><span class="n">Seek</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">SaveLoadData</span><span class="p">(</span><span class="n">FromBinary</span><span class="p">,</span><span class="n">NumGemsCollected</span><span class="p">,</span><span class="n">PlayerLocation</span><span class="p">,</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">);</span>

	<span class="c1">//~</span>
	<span class="c1">//								Clean up </span>
	<span class="c1">//~</span>
	<span class="n">FromBinary</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
	
	<span class="c1">// Empty &amp; Close Buffer </span>
	<span class="n">TheBinaryArray</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
	<span class="n">FromBinary</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
	
	<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="Saving_Compressed">
        Saving Compressed
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="kt">bool</span> <span class="n">ControllerClass</span><span class="o">::</span><span class="n">SaveGameDataToFileCompressed</span><span class="p">(</span><span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">FullFilePath</span><span class="p">,</span> 
	<span class="n">int32</span><span class="o">&amp;</span> <span class="n">SaveDataInt32</span><span class="p">,</span>
	<span class="n">FVector</span><span class="o">&amp;</span> <span class="n">SaveDataVector</span><span class="p">,</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">FRotator</span><span class="o">&gt;&amp;</span> <span class="n">SaveDataRotatorArray</span>
<span class="p">){</span>
	<span class="n">FBufferArchive</span> <span class="n">ToBinary</span><span class="p">;</span>
	<span class="n">SaveLoadData</span><span class="p">(</span><span class="n">ToBinary</span><span class="p">,</span><span class="n">NumGemsCollected</span><span class="p">,</span><span class="n">PlayerLocation</span><span class="p">,</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">);</span> 
	
	<span class="c1">//Pre Compressed Size</span>
	<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"~ PreCompressed Size ~"</span><span class="p">);</span>
	<span class="n">ClientMessage</span><span class="p">(</span><span class="n">FString</span><span class="o">::</span><span class="n">FromInt</span><span class="p">(</span><span class="n">ToBinary</span><span class="p">.</span><span class="n">Num</span><span class="p">()));</span>
	
	<span class="c1">//</span>
	
	<span class="c1">// Compress File </span>
	<span class="c1">//tmp compressed data array</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">uint8</span><span class="o">&gt;</span> <span class="n">CompressedData</span><span class="p">;</span>
	<span class="n">FArchiveSaveCompressedProxy</span> <span class="n">Compressor</span> <span class="o">=</span> 
		<span class="n">FArchiveSaveCompressedProxy</span><span class="p">(</span><span class="n">CompressedData</span><span class="p">,</span> <span class="n">ECompressionFlags</span><span class="o">::</span><span class="n">COMPRESS_ZLIB</span><span class="p">);</span>
	
	<span class="c1">//Send entire binary array/archive to compressor</span>
	<span class="n">Compressor</span> <span class="o">&lt;&lt;</span> <span class="n">ToBinary</span><span class="p">;</span>
	
	<span class="c1">//send archive serialized data to binary array</span>
	<span class="n">Compressor</span><span class="p">.</span><span class="n">Flush</span><span class="p">();</span>
	
	<span class="c1">//</span>
	
	<span class="c1">//Compressed Size</span>
	<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"~ Compressed Size ~"</span><span class="p">);</span>
	<span class="n">ClientMessage</span><span class="p">(</span><span class="n">FString</span><span class="o">::</span><span class="n">FromInt</span><span class="p">(</span><span class="n">CompressedData</span><span class="p">.</span><span class="n">Num</span><span class="p">()));</span>
	
	
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">GFileManager</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
	
	<span class="c1">//vibes to file, return successful or not</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">FFileHelper</span><span class="o">::</span><span class="n">SaveArrayToFile</span><span class="p">(</span><span class="n">CompressedData</span><span class="p">,</span> <span class="o">*</span> <span class="n">FullFilePath</span><span class="p">))</span> 
	<span class="p">{</span>
		<span class="c1">// Free Binary Arrays </span>
		<span class="n">Compressor</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
		<span class="n">CompressedData</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
		
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
		
		<span class="c1">// Close Buffer </span>
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
		
		<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"File Save Success!"</span><span class="p">);</span>
		
		<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
		<span class="c1">//</span>
	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="c1">// Free Binary Arrays </span>
                <span class="n">Compressor</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
		<span class="n">CompressedData</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>

		<span class="n">ToBinary</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
		
		<span class="c1">// Close Buffer </span>
		<span class="n">ToBinary</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
		
		<span class="n">ClientMessage</span><span class="p">(</span><span class="s">"File Could Not Be Saved!"</span><span class="p">);</span>
		
		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
		<span class="c1">//</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre>
      </div>
      <p>
       <br/>
      </p>
      <h3>
       <span class="mw-headline" id="Loading_Compressed">
        Loading Compressed
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">//I am using the sample save data from above examples as the data being loaded</span>
<span class="kt">bool</span> <span class="n">ControllerClass</span><span class="o">::</span><span class="n">LoadGameDataFromFileCompressed</span><span class="p">(</span>
	<span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">FullFilePath</span><span class="p">,</span> 
	<span class="n">int32</span><span class="o">&amp;</span> <span class="n">SaveDataInt32</span><span class="p">,</span>
	<span class="n">FVector</span><span class="o">&amp;</span> <span class="n">SaveDataVector</span><span class="p">,</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">FRotator</span><span class="o">&gt;&amp;</span> <span class="n">SaveDataRotatorArray</span>
<span class="p">){</span>
	<span class="c1">//Load the Compressed data array</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">uint8</span><span class="o">&gt;</span> <span class="n">CompressedData</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">FFileHelper</span><span class="o">::</span><span class="n">LoadFileToArray</span><span class="p">(</span><span class="n">CompressedData</span><span class="p">,</span> <span class="o">*</span><span class="n">FullFilePath</span><span class="p">))</span>
	<span class="p">{</span>
		<span class="n">Optimize</span><span class="p">(</span><span class="s">"FFILEHELPER:&gt;&gt; Invalid File"</span><span class="p">);</span>
		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
		<span class="c1">//~~</span>
	<span class="p">}</span>
	
	<span class="c1">// Decompress File </span>
	<span class="n">FArchiveLoadCompressedProxy</span> <span class="n">Decompressor</span> <span class="o">=</span> 
		<span class="n">FArchiveLoadCompressedProxy</span><span class="p">(</span><span class="n">CompressedData</span><span class="p">,</span> <span class="n">ECompressionFlags</span><span class="o">::</span><span class="n">COMPRESS_ZLIB</span><span class="p">);</span>
	
	<span class="c1">//Decompression Error?</span>
	<span class="k">if</span><span class="p">(</span><span class="n">Decompressor</span><span class="p">.</span><span class="n">GetError</span><span class="p">())</span>
	<span class="p">{</span>
		<span class="n">Optimize</span><span class="p">(</span><span class="s">"FArchiveLoadCompressedProxy&gt;&gt; ERROR : File Was Not Compressed "</span><span class="p">);</span>
		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
		<span class="c1">//</span>
	<span class="p">}</span>
	
	<span class="c1">//Decompress</span>
	<span class="n">FBufferArchive</span> <span class="n">DecompressedBinaryArray</span><span class="p">;</span>
	<span class="n">Decompressor</span> <span class="o">&lt;&lt;</span> <span class="n">DecompressedBinaryArray</span><span class="p">;</span>
	
	<span class="c1">//~</span>
	<span class="c1">//		  Read the Data Retrieved by GFileManager</span>
	<span class="c1">//~</span>
	
	<span class="n">FMemoryReader</span> <span class="n">FromBinary</span> <span class="o">=</span> <span class="n">FMemoryReader</span><span class="p">(</span><span class="n">DecompressedBinaryArray</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span> <span class="c1">//true, free data after done</span>
	<span class="n">FromBinary</span><span class="p">.</span><span class="n">Seek</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">SaveLoadData</span><span class="p">(</span><span class="n">FromBinary</span><span class="p">,</span><span class="n">NumGemsCollected</span><span class="p">,</span><span class="n">PlayerLocation</span><span class="p">,</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">);</span>

	<span class="c1">//~</span>
	<span class="c1">//								Clean up </span>
	<span class="c1">//~</span>
	<span class="n">CompressedData</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
	<span class="n">Decompressor</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
	<span class="n">FromBinary</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">();</span>
	
	<span class="c1">// Empty &amp; Close Buffer </span>
	<span class="n">DecompressedBinaryArray</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
	<span class="n">DecompressedBinaryArray</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
	
	<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre>
      </div>
      <p>
       <br/>
      </p>
      <h2>
       <span class="mw-headline" id="_2">
       </span>
      </h2>
      <h2>
       <span class="mw-headline" id="Overloading_the_.3C.3C_Operator">
        Overloading the &lt;&lt; Operator
       </span>
      </h2>
      <p>
       Create your own &lt;&lt; Operator overloads to simplify the process!
      </p>
      <p>
       Let's say you have your own USTRUCT or your own class, and you want to write a way to
      </p>
      <p>
       simply write
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="n">ToBinary</span> <span class="o">&lt;&lt;</span> <span class="n">MyEntireSaveSystem</span><span class="p">;</span>
</pre>
      </div>
      <p>
       or
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="n">ToBinary</span> <span class="o">&lt;&lt;</span> <span class="n">MySpecialUStruct</span><span class="p">;</span>
</pre>
      </div>
      <p>
       <br/>
       Here's how you overload the &lt;&lt; Operator!
      </p>
      <p>
       Please note this must be in the .h file, and no contents in the .cpp.
      </p>
      <p>
       Also there is no context, such as MyClass::, it must be at the global level.
      </p>
      <p>
       Also the .h file that has this definition must be compiled before any classes that want to use it.
      </p>
      <p>
       You can use UClass(dependson=UYourDefinitionsClass) to ensure this
      </p>
      <p>
       or simply put the .h contents in your public directory
      </p>
      <p>
       and include them as a header somewhere.
      </p>
      <p>
       <b>
        .h
       </b>
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">//Make as many Unique Overloads as you want!</span>
<span class="n">FORCEINLINE</span> <span class="n">FArchive</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">FArchive</span> <span class="o">&amp;</span><span class="n">Ar</span><span class="p">,</span> <span class="n">UMySaveGameClass</span><span class="o">*</span> <span class="n">SaveGameData</span> <span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">SaveGameData</span><span class="p">)</span> <span class="k">return</span> <span class="n">Ar</span><span class="p">;</span>
	<span class="c1">//~</span>
	
	<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">SaveGameData</span><span class="o">-&gt;</span><span class="n">NumGemsCollected</span><span class="p">;</span>  <span class="c1">//int32</span>
	<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">SaveGameData</span><span class="o">-&gt;</span><span class="n">PlayerLocation</span><span class="p">;</span>  <span class="c1">//FVector</span>
	<span class="n">Ar</span> <span class="o">&lt;&lt;</span> <span class="n">SaveGameData</span><span class="o">-&gt;</span><span class="n">ArrayOfRotationsOfTheStars</span><span class="p">;</span> <span class="c1">//TArray&lt;FRotator&gt;</span>

        <span class="k">return</span> <span class="n">Ar</span><span class="p">;</span>
<span class="p">}</span>
</pre>
      </div>
      <p>
       <b>
        Note:
       </b>
      </p>
      <p>
       1. The operator is returning the Ar by reference.
      </p>
      <p>
       2. No const are allowed at global level (its a compile error)
      </p>
      <p>
       3. No const allowed inside because you dont know if you are reading or writing due to nature of &lt;&lt; operator.
      </p>
      <h2>
       <span class="mw-headline" id="Crashes.3F">
        Crashes?
       </span>
      </h2>
      <p>
       If you get crashes you are not reading/writing data in same order,
      </p>
      <p>
       use overloaded &lt;&lt; operator and the idea of a single function like SaveLoadGame to avoid this
      </p>
      <p>
       <br/>
       Also, if you
       <b>
        compress data before saving it
       </b>
       make sure you are loading it using my
       <b>
        compressed function
       </b>
       , not the regular one, and vice versa :)
      </p>
      <h2>
       <span class="mw-headline" id="Enjoy.21">
        Enjoy!
       </span>
      </h2>
      <p>
       Have fun making your very own custom save game system, and saving it to compressed binary file!
      </p>
      <p>
       ♥
      </p>
      <p>
       (
       )
      </p>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
 </body>
</html>