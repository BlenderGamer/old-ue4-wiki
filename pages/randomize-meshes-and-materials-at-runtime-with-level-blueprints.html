<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <link href="https://www.epicgames.com/tos"/>
  <title>
   Randomize Meshes and Materials at runtime with Level Blueprints - Old UE4 Wiki
  </title>
  <link href="../styles.css" rel="stylesheet"/>
 </head>
 <body>
  <nav id="top-nav">
   <a href="../index.html" title="Home">
    Home
   </a>
  </nav>
  <div class="mw-body" id="content" role="main">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    Randomize Meshes and Materials at runtime with Level Blueprints
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From Epic Wiki
    </div>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <p>
      </p>
      <div class="toc" id="toc">
       <div class="toctitle">
        <h2>
         Contents
        </h2>
       </div>
       <ul>
        <li class="toclevel-1 tocsection-1">
         <a href="#Overview">
          <span class="tocnumber">
           1
          </span>
          <span class="toctext">
           Overview
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-2">
         <a href="#Setting_up_Meshes">
          <span class="tocnumber">
           2
          </span>
          <span class="toctext">
           Setting up Meshes
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-3">
         <a href="#Randomizing_Mesh">
          <span class="tocnumber">
           3
          </span>
          <span class="toctext">
           Randomizing Mesh
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-4">
         <a href="#Randomizing_Materials.2FTextures">
          <span class="tocnumber">
           4
          </span>
          <span class="toctext">
           Randomizing Materials/Textures
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-5">
         <a href="#Matinee_Embellishment">
          <span class="tocnumber">
           5
          </span>
          <span class="toctext">
           Matinee Embellishment
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-6">
         <a href="#Ending_it">
          <span class="tocnumber">
           6
          </span>
          <span class="toctext">
           Ending it
          </span>
         </a>
        </li>
       </ul>
      </div>
      <h2>
       <span class="mw-headline" id="Overview">
        Overview
       </span>
      </h2>
      <p>
       Blueprints are a kind of Next Generation for Kismet from UE3. In this tutorial I would provide a way to Randomize Meshes and Materials through Blueprints at run-time. I am using 3 very basic Meshes and very basic Vector Colored Materials for this purpose.
      </p>
      <p>
       Along the tutorial I'll also provide a few steps where the people very new to Unreal could easily learn to Animate meshes with Matinee.
Lastly, it was made on the Rocket Beta version of UE4 that I was testing since a few months. Version: 1904627
      </p>
      <h2>
       <span class="mw-headline" id="Setting_up_Meshes">
        Setting up Meshes
       </span>
      </h2>
      <p>
       So firstly, import your Static Meshes and Textures with Content Browser. The 3 Meshes I imported are of a Rocket, Spaceship and a Saucer and applied very basic Materials on each of them.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="ImportMeshes.jpg" class="thumbimage" height="256" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/0.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now in your level, put in one of your meshes and change its Mobility to
       <b>
        "Movable"
       </b>
       . The reason behind this is that a Static Mesh only gets dynamically accessed or moved with Matinee, Code or Blueprints in-game when it is set to Movable. This is similar to
       <b>
        "InterpActor"
       </b>
       entity in UDK.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="Mobility.jpg" class="thumbimage" height="256" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/1.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Open the Level Blueprints, which can be accessed from the top panel of the Editor. Select the Static Mesh Actor in the Level and go to the Blueprints Graph Editor. While the Actor still selected, Right-click on the Graph Workspace and do a search filter for
       <b>
        "Set Static Mesh"
       </b>
       . You will then get a
       <b>
        "Set Static Mesh"
       </b>
       node with the Actor variable already attached to it. Hover over the
       <b>
        "New Mesh"
       </b>
       option and click to the last Grid-like button which says
       <b>
        "Pick"
       </b>
       . In the search field, find the Mesh you want it to change with and click on it. In my case, I wanted to set it with the Spaceship mesh I imported.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="SetSMFilter.jpg" class="thumbimage" height="356" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/2.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="SetSM.jpg" class="thumbimage" height="356" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/3.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="PickMesh.jpg" class="thumbimage" height="356" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/4.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <h2>
       <span class="mw-headline" id="Randomizing_Mesh">
        Randomizing Mesh
       </span>
      </h2>
      <p>
       Now, before anything else, make 2 more copies of the
       <b>
        "Set Static Mesh"
       </b>
       node and in each node, pick a different New Mesh. You can do this simply with Ctrl+C and Ctrl+V. In my case, I kept one copy as the Rocket mesh itself and another as Saucer mesh I imported. Just make sure that you connect the variable node as
       <b>
        Target
       </b>
       in each "Set Static Mesh" node.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="CopySSM.jpg" class="thumbimage" height="356" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/5.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       To the right of the Blueprints Editor, in the Palette column, or by Right-clicking on the empty Graph area, search and find a Function Node called
       <b>
        "Switch on Int"
       </b>
       and place it in the graph. This can be related to the
       <i>
        Switch Cases
       </i>
       in programming languages where you can give multiple switch cases and also declare a
       <i>
        "Default"
       </i>
       value which keeps you on the safe side by giving an output if something beyond the scope of the Switch Cases is called. We'll Understand this quickly here soon.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="FindSwitch.jpg" class="thumbimage" height="213" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/6.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now, add 3 output pins by clicking thrice on the
       <b>
        "Add Pin"
       </b>
       button on the node. This basically sets the output nodes for the Switch Cases. Also, on the left part of the Switch node, is an Input plug for Selection, which is Green in color, which means that it'll take an
       <i>
        Integer
       </i>
       for an input(the color coding of Unreal is pretty good even in UE3/UDK Kismet). Now you can give this Integer input value dynamically anyhow in your game levels. In this case here, we'll
       <b>
        Randomize
       </b>
       it. Go back to the Palette Search on the right and search
       <b>
        "Random Integer"
       </b>
       and place it in the graph. It also has a
       <b>
        Max
       </b>
       integer input plug, which can be declared internally by putting a value just besides it. I'll set it to
       <b>
        3
       </b>
       . This means that it'll output randomly between numbers 0-3. Output this Random node to the Integer Input of Switch Node. One thing to note here is that the Switch node, again, works like the Programming counterparts and starts with 0 being the first value and not 1. So if we are switching between random numbers 0-3, it will mean that whenever 3 is output from Random node, the Switch will select
       <b>
        Default
       </b>
       declaration because Switch legally toggles between numbers
       <b>
        0,1,2
       </b>
       . Since 3 is out of its scope, it will save us from a hazard by choosing Default. This can be very useful in the games as well as in usual Programming. Just take each output node from Switch and connect it to each
       <b>
        "Set Static Mesh"
       </b>
       node. I put Default as first Set Static Mesh node too.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="Randomnode.jpg" class="thumbimage" height="213" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/7.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <h2>
       <span class="mw-headline" id="Randomizing_Materials.2FTextures">
        Randomizing Materials/Textures
       </span>
      </h2>
      <p>
       Being done with the part of setting Static Meshes dynamically, we move forward to setting the Materials dynamically. Make sure you still have the Static Mesh Actor Selected in the level and do the similar steps; Right-click on Graph, filter out and place
       <b>
        "Set Material"
       </b>
       node. In the Material input of the node, I picked Spaceship Material, made 2 more copies of it and in them picked Rocket and Saucer materials.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="SetMaterial.jpg" class="thumbimage" height="294" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/8.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now simply copy and paste the
       <b>
        Switch
       </b>
       and its connected
       <b>
        Random Integer
       </b>
       nodes and place them between the
       <b>
        "Set Static Mesh"
       </b>
       and
       <b>
        "Set Material"
       </b>
       nodes. Input each Static Mesh node into the Switch Input node and connect each Output of the Switch to each
       <b>
        "Set Material"
       </b>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="ConnectSSM-SM.jpg" class="thumbimage" height="263" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/9.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <h2>
       <span class="mw-headline" id="Matinee_Embellishment">
        Matinee Embellishment
       </span>
      </h2>
      <p>
       Firstly now, compile your Blueprint from the Top-left option on the Blueprint Editor and save the level just for the safety and close the Blueprint Editor. Go to the Rocket Editor and from the top
       <b>
        Matinee
       </b>
       option choose
       <b>
        "Add Matinee"
       </b>
       .
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="AddMatinee.jpg" class="thumbimage" height="263" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/10.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       When the Matinee editor opens up, again, make sure your Static Mesh actor is selected. Right-click on the blank grey area of the editor and choose
       <b>
        "Add New Empty Group"
       </b>
       . When the naming box comes, we simply name it
       <i>
        Rocket01
       </i>
       and we see a track is created in the Matinee Editor by the same name.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="ChooseEmptyGroup.jpg" class="thumbimage" height="263" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/11.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="Trackcreated.jpg" class="thumbimage" height="263" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/12.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       To test that the Static Mesh Actor in the level is connected to the Matinee track here, simply click on the track. If it's all well, it'll select the Actor in the level. Now, Right-click on the track and select
       <b>
        "Add New Movement Track"
       </b>
       .
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="NewMovetrack.jpg" class="thumbimage" height="263" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/13.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Just to show a simple straight line movement, we drag the black Time Bar to the end of the track, which by default is set to 5 Seconds. If you have to make it smaller or bigger, you can do so by moving the bar with the Red end on the Right side. So, at the end of the track, and with
       <b>
        "Movement"
       </b>
       track selected, either press Enter or click
       <b>
        "Add Key"
       </b>
       to the left top corner of the window. This will add a new Keyframe at the Timeline as well as activate the Matinee animation Input. You can see
       <b>
        "Key Movement 1"
       </b>
       visible at the left bottom corner. While the Matinee Editor still open, just minimize it and drag you Actor wherever you want; you can even rotate it in anyway. If its all going right, you should be able to see a yellow trajectory when you drag your actor. This trajectory is basically the path on which your Actor travels.(Pretty useful in Camera animations specifically, if you ask me).
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="MatineeKeyframe.jpg" class="thumbimage" height="266" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/14.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="MatineeAnimateActor.jpg" class="thumbimage" height="358" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/15.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now simply close your Matinee Editor and in the Outliner, select the Matinee Actor which got created and while its selected, open back your Level Blueprints Editor. Right-click on the graph and filter search
       <b>
        "Matinee Play"
       </b>
       . Select it and you should get a Play node with your Matinee Actor attached to it. Now simply connect all three
       <b>
        "Set Material"
       </b>
       nodes to the
       <b>
        Play
       </b>
       input of the Matinee node.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="MatineeBluePrintConnect.jpg" class="thumbimage" height="366" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/16.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <h2>
       <span class="mw-headline" id="Ending_it">
        Ending it
       </span>
      </h2>
      <p>
       To end it, just plug the first node to an Event. In our case, I'll plug it to the
       <b>
        "RecieveBeginPlay"
       </b>
       event. So now if you compile the Blueprint and run the Simulation, every time you run it, a random Mesh and a Random Material will execute on the give Matinee path. You could even loop it if you require.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:514px;">
        <img alt="Eventplugin.jpg" class="thumbimage" height="255" src="../assets/randomize-meshes-and-materials-at-runtime-with-level-blueprints/17.jpg" width="512"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       This could be multiplied for more Static Mesh actors generating more Random Meshes and Materials on their respective Matinee paths by just copy-pasting all the nodes and simply changing the Mesh, Material and Random Integer input values.
      </p>
      <p>
       Hope you find it useful.
      </p>
      <p>
      </p>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
 </body>
</html>