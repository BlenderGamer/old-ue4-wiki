<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <link href="https://www.epicgames.com/tos"/>
  <title>
   World Machine to UE4 using World Composition - Old UE4 Wiki
  </title>
  <link href="../styles.css" rel="stylesheet"/>
 </head>
 <body>
  <nav id="top-nav">
   <a href="../index.html" title="Home">
    Home
   </a>
  </nav>
  <div class="mw-body" id="content" role="main">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    World Machine to UE4 using World Composition
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From Epic Wiki
    </div>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <p>
      </p>
      <div class="toc" id="toc">
       <div class="toctitle">
        <h2>
         Contents
        </h2>
       </div>
       <ul>
        <li class="toclevel-1 tocsection-1">
         <a href="#Overview">
          <span class="tocnumber">
           1
          </span>
          <span class="toctext">
           Overview
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-2">
         <a href="#Terrain_Creation_in_WM">
          <span class="tocnumber">
           2
          </span>
          <span class="toctext">
           Terrain Creation in WM
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-3">
           <a href="#Generators">
            <span class="tocnumber">
             2.1
            </span>
            <span class="toctext">
             Generators
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-4">
           <a href="#Natural_Processes">
            <span class="tocnumber">
             2.2
            </span>
            <span class="toctext">
             Natural Processes
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-5">
         <a href="#Terrain_Export_in_WM">
          <span class="tocnumber">
           3
          </span>
          <span class="toctext">
           Terrain Export in WM
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-6">
           <a href="#Tiled_Build_Setup">
            <span class="tocnumber">
             3.1
            </span>
            <span class="toctext">
             Tiled Build Setup
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-7">
           <a href="#General_Setup">
            <span class="tocnumber">
             3.2
            </span>
            <span class="toctext">
             General Setup
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-8">
           <a href="#Height_Output_Setup">
            <span class="tocnumber">
             3.3
            </span>
            <span class="toctext">
             Height Output Setup
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-9">
           <a href="#Weightmaps_Setup">
            <span class="tocnumber">
             3.4
            </span>
            <span class="toctext">
             Weightmaps Setup
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-10">
           <a href="#Build">
            <span class="tocnumber">
             3.5
            </span>
            <span class="toctext">
             Build
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-11">
         <a href="#Terrain_Material_Setup_in_UE4">
          <span class="tocnumber">
           4
          </span>
          <span class="toctext">
           Terrain Material Setup in UE4
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-12">
         <a href="#World_Composition_in_UE4">
          <span class="tocnumber">
           5
          </span>
          <span class="toctext">
           World Composition in UE4
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-13">
           <a href="#Persistent_Level_Setup">
            <span class="tocnumber">
             5.1
            </span>
            <span class="toctext">
             Persistent Level Setup
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-14">
           <a href="#Tiled_Landscape_Import">
            <span class="tocnumber">
             5.2
            </span>
            <span class="toctext">
             Tiled Landscape Import
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-15">
         <a href="#Terrain_in_UE4">
          <span class="tocnumber">
           6
          </span>
          <span class="toctext">
           Terrain in UE4
          </span>
         </a>
        </li>
       </ul>
      </div>
      <h2>
       <span class="mw-headline" id="Overview">
        Overview
       </span>
      </h2>
      <p>
       <i>
        Author:
       </i>
       (
     )
      </p>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     Creating worlds can be a long and detailed process. The time it takes to create worlds can be lessened with the proper steps. The process covered below creates tiled terrains in World Machine, exports them in the correct format with weightmaps, and imports them into UE4 using the world composition tool. Feel free to edit any information that is inacurate or add new information that may be relevant.
</pre>
      <h2>
       <span class="mw-headline" id="Terrain_Creation_in_WM">
        Terrain Creation in WM
       </span>
      </h2>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     Terrains can be created in many different programs and can even be created in UE4 itself. For this tutorial we will be using World Machine to create every part of the terrain. Below is the process of creating a quick terrain with an 8km by 8km size when imported into UE4.
</pre>
      <h3>
       <span class="mw-headline" id="Generators">
        Generators
       </span>
      </h3>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     In world Machine there are multiple ways to create terrains. One way is a procedural way using perlin or any other kind of noise generators. Another way is to import a heightmap created in another program as a basis. For the purposes of this tutorial we will be using the noise generators. Follow the steps below to create a terrain using a generator.
</pre>
      <ol>
       <li>
        Clear the world area to start fresh.
       </li>
       <li>
        Drag an advanced perlin noise device into the world.
       </li>
       <li>
        Double click on the device and change the parameters around to get the terrain you want.
       </li>
      </ol>
      <h3>
       <span class="mw-headline" id="Natural_Processes">
        Natural Processes
       </span>
      </h3>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     One of the major features of World Machine is the natural processors. These include erosion, thermal weathering and more. These give your terrains that real world look. Follow the steps below to add erosion to the terrain.
</pre>
      <ol>
       <li>
        Drag an erosion device into the world.
       </li>
       <li>
        Connect the ouput of the advanced perlin noise device to the erosion input.
       </li>
       <li>
        Double click on the erosion device and edit the settings to get the look you want.
       </li>
      </ol>
      <h2>
       <span class="mw-headline" id="Terrain_Export_in_WM">
        Terrain Export in WM
       </span>
      </h2>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">    To export the terrain from World Machine follow below. The export process is ran once exporting multiple files used for weightmaps for textures as well as the main heightmaps.
</pre>
      <h3>
       <span class="mw-headline" id="Tiled_Build_Setup">
        Tiled Build Setup
       </span>
      </h3>
      <pre>    Under "World Extents and Resolution" you will see a "Tiled Build Options" tab (This option is only available in World Machine Professional). Set the following options.
</pre>
      <ol>
       <li>
        Tile Resolution - Custom 2017 x 2017
       </li>
       <li>
        Tiles per Side - 4 x 4
       </li>
       <li>
        Blending Percentage - 100%
       </li>
       <li>
        Share edge vertices - tick
       </li>
       <li>
        Flip Y-axis orientation - tick
       </li>
      </ol>
      <p>
       <img alt="Tile Build Options.png" class="" height="263" src="../assets/world-machine-to-ue4-using-world-composition/0.png" width="400"/>
      </p>
      <h3>
       <span class="mw-headline" id="General_Setup">
        General Setup
       </span>
      </h3>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">Under the "General Setup" tab make note of the maximum elevation used. You can change this to your needs but remember that number, it will be used when importing into UE4.
</pre>
      <p>
       <img alt="World Machine General Settings.png" class="" height="263" src="../assets/world-machine-to-ue4-using-world-composition/1.png" width="400"/>
      </p>
      <h3>
       <span class="mw-headline" id="Height_Output_Setup">
        Height Output Setup
       </span>
      </h3>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     Ensure the final height output is attached to a Height Output node. Ensure the settings follow the settings below:
</pre>
      <ol>
       <li>
        Filename - Filepath/Planet_Name
       </li>
       <li>
        Participate in tiled builds - tick
       </li>
       <li>
        High Precision - RAW16
       </li>
      </ol>
      <p>
       <img alt="Height Output Settings.png" class="" height="474" src="../assets/world-machine-to-ue4-using-world-composition/2.png" width="326"/>
      </p>
      <h3>
       <span class="mw-headline" id="Weightmaps_Setup">
        Weightmaps Setup
       </span>
      </h3>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     Setup whatever weightmap selections you wish to use. Follow the steps below to setup weightmaps based off terrain angle.
</pre>
      <ol>
       <li>
        Create 3 Select Slope Nodes
       </li>
       <li>
        Attach the Primary Output node to each select slope input node.
       </li>
       <li>
        Set the angle selections for each select angle nodes.
       </li>
       <li>
        Attach the outputs from the select angle nodes to a height output node.
       </li>
       <li>
        Set a distinct name for each output and make sure it is tileable. Below are some screen shots for each step.
       </li>
      </ol>
      <p>
       <img alt="World Machine Node Setup.png" class="" height="155" src="../assets/world-machine-to-ue4-using-world-composition/3.png" width="400"/>
       <img alt="Select Angle Node.png" class="" height="313" src="../assets/world-machine-to-ue4-using-world-composition/4.png" width="234"/>
       <img alt="Weightmap Output Settings.png" class="" height="477" src="../assets/world-machine-to-ue4-using-world-composition/5.png" width="324"/>
      </p>
      <h3>
       <span class="mw-headline" id="Build">
        Build
       </span>
      </h3>
      <pre>    Now just click the tiled build option and let it run.
</pre>
      <h2>
       <span class="mw-headline" id="Terrain_Material_Setup_in_UE4">
        Terrain Material Setup in UE4
       </span>
      </h2>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     The material for the terrain should be setup first. Follow the steps below to setup a terrain ready to accept the weightmaps exported earlier.
</pre>
      <ol>
       <li>
        Create a new material in UE4.
       </li>
       <li>
        Create a Landscape Layer Weight node for each weightmap you exported from World Machine. In the example in the previous section we exported 3 weightmaps based of High, Mid, and low angles.
       </li>
       <li>
        Name the Layer Weights something you will remember and can associate with the weightmaps exported from World Machine.
       </li>
       <li>
        Connect the output of the layer you want on the bottom to the "Base" input of the layer you want in the middle.
       </li>
       <li>
        Connect the output of the layer you want in the middle to the "Base" input of the layer you want on top.
       </li>
       <li>
        Connect the output of the layer you want on top to the "Base Color" input on the material node.
       </li>
       <li>
        Drag the textures you want to use for each layer into the material editor.
       </li>
       <li>
        Connect the outputs of the textures to the associated "Layer" input on the landscape layer weight nodes.
       </li>
       <li>
        Add a Landscape Layer Coords and attach the output to the "UVs" input of each texture node.
       </li>
       <li>
        In the Landscape Layer Coords set the tiling to whatever you want. Start with 25 and go from there.
       </li>
       <li>
        If you wish to use Normal Maps for the textures duplicate the process above. Instead of connecting the output of the last layer weight node to the "Base Color" input, connect it to the "Normal" input on the material node.
       </li>
       <li>
        Below is an example node structure.
       </li>
      </ol>
      <p>
       <img alt="Landscape Material.png" class="" height="198" src="../assets/world-machine-to-ue4-using-world-composition/6.png" width="400"/>
      </p>
      <h2>
       <span class="mw-headline" id="World_Composition_in_UE4">
        World Composition in UE4
       </span>
      </h2>
      <pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;">     World composition allows smaller chunks of the planet be loaded at runtime when the player is close enough to that chunk. Below are the steps to get the terrain into the world.
</pre>
      <h3>
       <span class="mw-headline" id="Persistent_Level_Setup">
        Persistent Level Setup
       </span>
      </h3>
      <pre>    To setup the persistent level follow the steps below:
</pre>
      <ol>
       <li>
        Create a new level with a sky-box pre-built or not.
       </li>
       <li>
        Save the file with the Planet or location name.
       </li>
       <li>
        Open the world settings and check the box labeled "Enable World Composition"
       </li>
      </ol>
      <p>
       <img alt="UE4 World Settings.png" class="" height="214" src="../assets/world-machine-to-ue4-using-world-composition/7.png" width="386"/>
      </p>
      <h3>
       <span class="mw-headline" id="Tiled_Landscape_Import">
        Tiled Landscape Import
       </span>
      </h3>
      <pre>    To import a tiled landscape follow the steps below
</pre>
      <ol>
       <li>
        Open the levels window.
       </li>
       <li>
        Click the Levels drop down menu in the upper-left of the levels window.
       </li>
       <li>
        Select "Import Tiled Landscape..."
       </li>
       <li>
        Click the "Select heightmap Tiles..." button.
       </li>
       <li>
        Navigate to the folder where you saved the raw heightmap images from World Machine
       </li>
       <li>
        Select all the tiled files. (e.g. Planet_Name_x0_y0)
       </li>
       <li>
        Change the Z scale. Times the world height used from World Machine by 0.1953125 and enter that number in Z scale.
       </li>
       <li>
        Select the Material created earlier. Once selected it should give you the weightmaps option.
       </li>
       <li>
        Now click the "Select Weightmap Tiles..." button.
       </li>
       <li>
        Navigate to the folder where you saved the raw weightmap images from World Machine
       </li>
       <li>
        Select all the tiled files for each weightmap. (e.g. Planet_Name_HighAngle-x0_y0)
       </li>
       <li>
        Then click "Import"
       </li>
       <li>
        Select all the Planet_Name_x#_y# levels in the Levels window
       </li>
       <li>
        Right click and select load to see if the imported properly.
       </li>
       <li>
        Below are some images of the process.
       </li>
      </ol>
      <p>
       <img alt="UE4 Levels Window.png" class="" height="335" src="../assets/world-machine-to-ue4-using-world-composition/8.png" width="692"/>
       <img alt="UE4 Tiled Landscape Import.png" class="" height="256" src="../assets/world-machine-to-ue4-using-world-composition/9.png" width="357"/>
       <img alt="UE4 Tiled Landscape Import Final.png" class="" height="345" src="../assets/world-machine-to-ue4-using-world-composition/10.png" width="590"/>
       <img alt="UE4 Levels Window Level Load.png" class="" height="543" src="../assets/world-machine-to-ue4-using-world-composition/11.png" width="932"/>
      </p>
      <h2>
       <span class="mw-headline" id="Terrain_in_UE4">
        Terrain in UE4
       </span>
      </h2>
      <pre>    Below are the images of the terrain fully loaded into UE4 using the process above.
</pre>
      <p>
       <img alt="UE4 Terrain in Engine 2.jpg" class="" height="317" src="../assets/world-machine-to-ue4-using-world-composition/12.jpg" width="400"/>
       <img alt="UE4 Terrain in Engine.jpg" class="" height="316" src="../assets/world-machine-to-ue4-using-world-composition/13.jpg" width="400"/>
      </p>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
 </body>
</html>