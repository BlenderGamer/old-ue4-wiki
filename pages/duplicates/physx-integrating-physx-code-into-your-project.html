<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <link href="https://www.epicgames.com/tos"/>
  <title>
   PhysX, Integrating PhysX Code into Your Project - Old UE4 Wiki
  </title>
  <link href="../styles.css" rel="stylesheet"/>
 </head>
 <body>
  <nav id="top-nav">
   <a href="../index.html" title="Home">
    Home
   </a>
  </nav>
  <div class="mw-body" id="content" role="main">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    PhysX, Integrating PhysX Code into Your Project
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From Epic Wiki
    </div>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <div class="toc" id="toc">
       <div class="toctitle">
        <h2>
         Contents
        </h2>
       </div>
       <ul>
        <li class="toclevel-1 tocsection-1">
         <a href="#Overview">
          <span class="tocnumber">
           1
          </span>
          <span class="toctext">
           Overview
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-2">
         <a href="#PhysX_3.3_Source_Code_For_UE4_Developers">
          <span class="tocnumber">
           2
          </span>
          <span class="toctext">
           PhysX 3.3 Source Code For UE4 Developers
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-3">
         <a href="#Compiling_the_PhysX_Source_Code">
          <span class="tocnumber">
           3
          </span>
          <span class="toctext">
           Compiling the PhysX Source Code
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-4">
         <a href="#Video_of_a_PhysX_Vortex_Spiral_in_UE4">
          <span class="tocnumber">
           4
          </span>
          <span class="toctext">
           Video of a PhysX Vortex Spiral in UE4
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-5">
         <a href="#Pics">
          <span class="tocnumber">
           5
          </span>
          <span class="toctext">
           Pics
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-6">
         <a href="#Custom_Destructible_Mesh_Class">
          <span class="tocnumber">
           6
          </span>
          <span class="toctext">
           Custom Destructible Mesh Class
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-7">
           <a href="#HappyDestructible.h">
            <span class="tocnumber">
             6.1
            </span>
            <span class="toctext">
             HappyDestructible.h
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-8">
           <a href="#HappyDestructible.cpp">
            <span class="tocnumber">
             6.2
            </span>
            <span class="toctext">
             HappyDestructible.cpp
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-9">
         <a href="#Packaging">
          <span class="tocnumber">
           7
          </span>
          <span class="toctext">
           Packaging
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-10">
         <a href="#PhysX_.7E_Basic">
          <span class="tocnumber">
           8
          </span>
          <span class="toctext">
           PhysX ~ Basic
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-11">
           <a href="#Build.CS">
            <span class="tocnumber">
             8.1
            </span>
            <span class="toctext">
             Build.CS
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-12">
           <a href="#The_Essential_Include">
            <span class="tocnumber">
             8.2
            </span>
            <span class="toctext">
             The Essential Include
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-13">
         <a href="#PhysX_.7E_Advanced">
          <span class="tocnumber">
           9
          </span>
          <span class="toctext">
           PhysX ~ Advanced
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-14">
           <a href="#PhysicsPublic.h">
            <span class="tocnumber">
             9.1
            </span>
            <span class="toctext">
             PhysicsPublic.h
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-15">
           <a href="#PhysXSupport.h_for_Scene_Read.2FWrite_Locking">
            <span class="tocnumber">
             9.2
            </span>
            <span class="toctext">
             PhysXSupport.h for Scene Read/Write Locking
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-16">
         <a href="#PhysX_.7E_How_to_Get_the_PhysX_Scene_.26_WRITE.2FREAD_LOCK">
          <span class="tocnumber">
           10
          </span>
          <span class="toctext">
           PhysX ~ How to Get the PhysX Scene &amp; WRITE/READ LOCK
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-17">
         <a href="#UE4_4.15.2B_Entry_PhysX_Points_Into_UE4_Engine">
          <span class="tocnumber">
           11
          </span>
          <span class="toctext">
           UE4 4.15+ Entry PhysX Points Into UE4 Engine
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-18">
         <a href="#Conclusion">
          <span class="tocnumber">
           12
          </span>
          <span class="toctext">
           Conclusion
          </span>
         </a>
        </li>
       </ul>
      </div>
      <h2>
       <span class="mw-headline" id="Overview">
        Overview
       </span>
      </h2>
      <p>
       <i>
        Author:
       </i>
       (
       )
      </p>
      <p>
       In this tutorial I am showing you how you can work with Nvidia PhysX directly in your UE4 code base!
      </p>
      <p>
       I provide sample code that iterates over all the destructible chunks of a DestructibleComponent and draws their current world space positions to the screen!
      </p>
      <h2>
       <span class="mw-headline" id="PhysX_3.3_Source_Code_For_UE4_Developers">
        PhysX 3.3 Source Code For UE4 Developers
       </span>
      </h2>
      <p>
       Nvidia has made PhysX3.3 Open Source for all Unreal Engine 4 Developers!
      </p>
      <p>
       Here's the link to the PhysX 3.3 Source Code
      </p>
      <p>
       <a class="external text" href="https://github.com/EpicGames/UnrealEngine/tree/master/Engine/Source/ThirdParty/PhysX/PhysX-3.3/Source" rel="nofollow">
        PhysX3.3 Source Code
       </a>
      </p>
      <p>
       <b>
        edit:
       </b>
       the link is broken but PhysX source code is in the UnrealEngine repo under .../Source/ThirdParty/PhysX/
      </p>
      <p>
       You must be signed in to a
       <b>
        UE4-Linked Github account
       </b>
       to view the above link!
      </p>
      <p>
       Simply sign up for Unreal Engine 4 and then follow the steps to link your github account to UE4.
      </p>
      <p>
       <a class="external text" href="https://www.unrealengine.com/ue4-on-github" rel="nofollow">
        UE4 Gitub Setup
       </a>
      </p>
      <h2>
       <span class="mw-headline" id="Compiling_the_PhysX_Source_Code">
        Compiling the PhysX Source Code
       </span>
      </h2>
      <p>
       Here's how to compile PhysX source code for UE4 as of 4.8!
      </p>
      <p>
       <a class="external text" href="./physx-source-guide.html" rel="nofollow">
        Compiling PhysX Source Code for UE4
       </a>
      </p>
      <h2>
       <span class="mw-headline" id="Video_of_a_PhysX_Vortex_Spiral_in_UE4">
        Video of a PhysX Vortex Spiral in UE4
       </span>
      </h2>
      <p>
       In this video I am programmatically arranging apex pieces after the mesh is destroyed and the pieces bounce around normally.
      </p>
      <p>
       I am arranging the pieces into a spiral/vortex formation!
      </p>
      <p>
       Please notice that the apex pieces continue to have collision with the world and even each other, after I begin spinning them myself via C++!
      </p>
      <p>
       This is all done via PhysX coding!
      </p>
      <p>
       There is
       <b>
        no measurable performance
       </b>
       hit with my current method, my frame rate stays solid at max :)
      </p>
      <p>
       In other words, I literally cannot detect any drop in performance even after I start the PhysX coding that you see in video below!
      </p>
      <p>
       &lt;youtube&gt;
       <a class="external free" href="https://www.youtube.com/watch?v=7KpkQPhvBKA" rel="nofollow">
        https://www.youtube.com/watch?v=7KpkQPhvBKA
       </a>
      </p>
      <p>
       This video is from my Abatron work in progress thread,
       <a class="external text" href="https://forums.unrealengine.com/showthread.php?45059-Abatron-the-making-of-a-UE4-Hybrid-game-)&amp;p=176126#post176126" rel="nofollow">
        UE4 Forum Link: Abatron
       </a>
      </p>
      <h2>
       <span class="mw-headline" id="Pics">
        Pics
       </span>
      </h2>
      <p>
       Below you can see I am drawing to screen the world space positions of each chunk of a Destructible Mesh using the PhysX code!
      </p>
      <p>
       Some of the points can't be seen cause they are hidden inside the little pieces :)
      </p>
      <p>
       But you can also see I am displaying the locations to the screen! Yay!
      </p>
      <p>
       <img alt="NvdiaUE4CPP1.jpg" class="" height="605" src="../assets/physx-integrating-physx-code-into-your-project/0.jpg" width="900"/>
      </p>
      <p>
       <br/>
      </p>
      <p>
       Below I added a vertical offset to make the points visible for all chunks!
      </p>
      <p>
       <img alt="PhysXUE4CPP2.jpg" class="" height="613" src="../assets/physx-integrating-physx-code-into-your-project/1.jpg" width="900"/>
      </p>
      <p>
       Enjoy!
      </p>
      <h2>
       <span class="mw-headline" id="Custom_Destructible_Mesh_Class">
        Custom Destructible Mesh Class
       </span>
      </h2>
      <p>
       Here's a custom destructible mesh class you can use to test whether you got the PhysX code setup properly!
      </p>
      <p>
       This is the code I used for the picture above!
      </p>
      <h3>
       <span class="mw-headline" id="HappyDestructible.h">
        HappyDestructible.h
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="cp">#pragma once</span>

<span class="cp">#include</span> <span class="cpf">"HappyDestructible.generated.h"</span><span class="cp"></span>
<span class="n">UCLASS</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">AHappyDestructible</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ADestructibleActor</span>
<span class="p">{</span>
	<span class="n">GENERATED_UCLASS_BODY</span><span class="p">()</span>
	
<span class="k">protected</span><span class="o">:</span>
	<span class="k">virtual</span> <span class="kt">void</span> <span class="n">Tick</span><span class="p">(</span><span class="kt">float</span> <span class="n">DeltaTime</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
	
<span class="c1">//Drawing!</span>
<span class="k">public</span><span class="o">:</span>
	<span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">DrawPoint</span> 
	<span class="p">(</span>
		<span class="k">const</span> <span class="n">FVector</span><span class="o">&amp;</span> <span class="n">Loc</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">float</span><span class="o">&amp;</span> <span class="n">Size</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="k">const</span> <span class="n">FColor</span><span class="o">&amp;</span> <span class="n">Color</span> <span class="o">=</span> <span class="n">FColor</span><span class="o">::</span><span class="n">Red</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">float</span> <span class="n">Duration</span><span class="o">=-</span><span class="mf">1.f</span>
	<span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
		<span class="n">DrawDebugPoint</span><span class="p">(</span>
			<span class="n">GetWorld</span><span class="p">(),</span> 
			<span class="n">Loc</span><span class="p">,</span>  
			<span class="n">Size</span><span class="p">,</span> <span class="c1">//thickness</span>
			<span class="n">Color</span><span class="p">,</span> 
			<span class="nb">false</span><span class="p">,</span>
			<span class="n">Duration</span>
		<span class="p">);</span>
	<span class="p">}</span> 

	<span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">ScreenMsg</span><span class="p">(</span><span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">Msg</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">AddOnScreenDebugMessage</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">5.f</span><span class="p">,</span> <span class="n">FColor</span><span class="o">::</span><span class="n">Red</span><span class="p">,</span> <span class="o">*</span><span class="n">Msg</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">ScreenMsg</span><span class="p">(</span><span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">Msg</span><span class="p">,</span> <span class="k">const</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">Msg2</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">AddOnScreenDebugMessage</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">5.f</span><span class="p">,</span> <span class="n">FColor</span><span class="o">::</span><span class="n">Red</span><span class="p">,</span> <span class="n">FString</span><span class="o">::</span><span class="n">Printf</span><span class="p">(</span><span class="n">TEXT</span><span class="p">(</span><span class="s">"%s %s"</span><span class="p">),</span> <span class="o">*</span><span class="n">Msg</span><span class="p">,</span> <span class="o">*</span><span class="n">Msg2</span><span class="p">));</span>
	<span class="p">}</span>

<span class="p">};</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="HappyDestructible.cpp">
        HappyDestructible.cpp
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="cp">#include</span> <span class="cpf">"YourGame.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"HappyDestructible.h"</span><span class="cp"></span>

<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="c1">//	   PhysX 			</span>
<span class="cp">#include</span> <span class="cpf">"PhysXIncludes.h" </span><span class="cp"></span>
<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~</span>

<span class="n">AHappyDestructible</span><span class="o">::</span><span class="n">AHappyDestructible</span><span class="p">(</span><span class="k">const</span> <span class="k">class</span> <span class="nc">FPostConstructInitializeProperties</span><span class="o">&amp;</span> <span class="n">PCIP</span><span class="p">)</span> <span class="o">:</span> <span class="n">Super</span><span class="p">(</span><span class="n">PCIP</span><span class="p">)</span>
<span class="p">{</span>
	
<span class="p">}</span>

<span class="c1">//Tick</span>
<span class="kt">void</span> <span class="n">AHappyDestructible</span><span class="o">::</span><span class="n">Tick</span><span class="p">(</span><span class="kt">float</span> <span class="n">DeltaTime</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">Super</span><span class="o">::</span><span class="n">Tick</span><span class="p">(</span><span class="n">DeltaTime</span><span class="p">);</span>
	<span class="c1">//~~~~~~~~~~~~</span>
	
	
	<span class="c1">//Draw All Centers to the screen!</span>
	<span class="cp">#if WITH_PHYSX</span>
	<span class="n">ScreenMsg</span><span class="p">(</span><span class="s">"Got into PhysX!!!"</span><span class="p">);</span>

        <span class="c1">//4.8 Version</span>
	<span class="n">uint32</span> <span class="n">ChunkCount</span> <span class="o">=</span> <span class="n">DestructibleComponent</span><span class="o">-&gt;</span><span class="n">ApexDestructibleActor</span><span class="o">-&gt;</span><span class="n">getNumVisibleChunks</span><span class="p">();</span>
	<span class="k">const</span> <span class="n">uint16</span><span class="o">*</span> <span class="n">ChunkIndices</span> <span class="o">=</span> <span class="n">DestructibleComponent</span><span class="o">-&gt;</span><span class="n">ApexDestructibleActor</span><span class="o">-&gt;</span><span class="n">getVisibleChunks</span><span class="p">();</span>
	<span class="k">for</span><span class="p">(</span><span class="n">uint32</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">ChunkCount</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">PxRigidDynamic</span><span class="o">*</span> <span class="n">PActor</span> <span class="o">=</span> <span class="n">DestructibleComponent</span><span class="o">-&gt;</span><span class="n">ApexDestructibleActor</span><span class="o">-&gt;</span><span class="n">getChunkPhysXActor</span><span class="p">(</span><span class="n">ChunkIndices</span><span class="p">[</span><span class="n">c</span><span class="p">]);</span>
		<span class="n">check</span><span class="p">(</span><span class="n">PActor</span><span class="p">);</span>
		<span class="n">PxTransform</span> <span class="n">Trans</span> <span class="o">=</span> <span class="n">PActor</span><span class="o">-&gt;</span><span class="n">getGlobalPose</span><span class="p">();</span>
		<span class="n">PxVec3</span><span class="o">&amp;</span> <span class="n">PxLoc</span> <span class="o">=</span> <span class="n">Trans</span><span class="p">.</span><span class="n">p</span><span class="p">;</span>

		<span class="n">FVector</span> <span class="nf">Location</span><span class="p">(</span><span class="n">PxLoc</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">PxLoc</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">PxLoc</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>

		<span class="n">DrawPoint</span><span class="p">(</span><span class="n">Location</span><span class="p">);</span>

		<span class="n">ScreenMsg</span><span class="p">(</span><span class="s">"physx loc"</span><span class="p">,</span> <span class="n">Location</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span>
	<span class="p">}</span>

        <span class="cm">/* PRE 4.8 Version</span>
<span class="cm">	for(FDestructibleChunkInfo&amp; Each : DestructibleComponent-&gt;ChunkInfos)</span>
<span class="cm">	{</span>
<span class="cm">		physx::PxRigidDynamic* Actor = Each.Actor;</span>
<span class="cm">		 </span>
<span class="cm">		if(Actor)</span>
<span class="cm">		{    </span>
<span class="cm">			PxTransform Trans = Actor-&gt;getGlobalPose();</span>
<span class="cm">			PxVec3&amp; PxLoc = Trans.p;</span>
<span class="cm">			</span>
<span class="cm">			FVector Location(PxLoc.x,PxLoc.y,PxLoc.z);</span>
<span class="cm">			</span>
<span class="cm">			DrawPoint(Location);</span>
<span class="cm">			</span>
<span class="cm">			ScreenMsg("physx loc", Location.ToString());</span>
<span class="cm">		}</span>
<span class="cm">	}</span>
<span class="cm">        */</span>
     <span class="cp">#endif </span><span class="c1">// WITH_PHYSX </span>
<span class="p">}</span>
</pre>
      </div>
      <h2>
       <span class="mw-headline" id="Packaging">
        Packaging
       </span>
      </h2>
      <p>
       I can verify that the code I've shared packages just fine into a full release game!
      </p>
      <h2>
       <span class="mw-headline" id="PhysX_.7E_Basic">
        PhysX ~ Basic
       </span>
      </h2>
      <h3>
       <span class="mw-headline" id="Build.CS">
        Build.CS
       </span>
      </h3>
      <p>
       You will need the following to work with Nvidia Apex:
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="n">PublicDependencyModuleNames</span><span class="p">.</span><span class="n">AddRange</span><span class="p">(</span><span class="k">new</span> <span class="n">string</span><span class="p">[]</span> <span class="p">{</span> 
	<span class="s">"Core"</span><span class="p">,</span> 
	<span class="s">"CoreUObject"</span><span class="p">,</span> 
	<span class="s">"Engine"</span><span class="p">,</span> 
	<span class="s">"InputCore"</span><span class="p">,</span>
	
   <span class="s">"PhysX"</span><span class="p">,</span> <span class="s">"APEX"</span> <span class="c1">//PhysX</span>
<span class="p">});</span>
</pre>
      </div>
      <h3>
       <span class="mw-headline" id="The_Essential_Include">
        The Essential Include
       </span>
      </h3>
      <p>
       You can include this in your .cpp or .h if you define any Px vars in your .h files.
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">//PhysX </span>
<span class="cp">#include</span> <span class="cpf">"PhysXIncludes.h"</span><span class="cp"></span>
</pre>
      </div>
      <h2>
       <span class="mw-headline" id="PhysX_.7E_Advanced">
        PhysX ~ Advanced
       </span>
      </h2>
      <h3>
       <span class="mw-headline" id="PhysicsPublic.h">
        PhysicsPublic.h
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="cp">#include</span> <span class="cpf">"PhysicsPublic.h"  //FPhysScene</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"PhysXPublic.h"    //PtoU conversions</span><span class="cp"></span>
</pre>
      </div>
      <p>
       These include give you access to the conversion functions from PhysX to Unreal and back for various essential types like FVector / PxVec3
      </p>
      <h3>
       <span class="mw-headline" id="PhysXSupport.h_for_Scene_Read.2FWrite_Locking">
        PhysXSupport.h for Scene Read/Write Locking
       </span>
      </h3>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="c1">//For Scene Locking using Epic's awesome helper macros like SCOPED_SCENE_READ_LOCK</span>
<span class="cp">#include</span> <span class="cpf">"Runtime/Engine/Private/PhysicsEngine/PhysXSupport.h"</span><span class="cp"></span>
</pre>
      </div>
      <p>
       This include is absolutely essential if you want to do any
       <b>
        low-level multi-threaded PhysX coding
       </b>
       !
      </p>
      <p>
       Epic has created some wonderful macros to make it fast to create scoped read/write locks of the PhysX scene, for example see below!
      </p>
      <h2>
       <span class="mw-headline" id="PhysX_.7E_How_to_Get_the_PhysX_Scene_.26_WRITE.2FREAD_LOCK">
        PhysX ~ How to Get the PhysX Scene &amp; WRITE/READ LOCK
       </span>
      </h2>
      <p>
       Here's some sample code I'v written for how you can get the PhysX scene if you have the UE4 UWorld* !
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="kt">void</span> <span class="n">SomeClass</span><span class="o">::</span><span class="n">SomeFunction</span><span class="p">(</span><span class="n">UWorld</span><span class="o">*</span> <span class="n">World</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">check</span><span class="p">(</span><span class="n">World</span><span class="p">);</span> 
  <span class="c1">//if crash here world was not valid, needs to be investigated, did it come from a UObject?</span>

  <span class="n">FPhysScene</span><span class="o">*</span> <span class="n">PhysScene</span> <span class="o">=</span> <span class="n">World</span><span class="o">-&gt;</span><span class="n">GetPhysicsScene</span><span class="p">();</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">PhysScene</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

  <span class="c1">// Scene Lock for Multi-Threading</span>
  <span class="n">PxScene</span><span class="o">*</span> <span class="n">SyncScene</span> <span class="o">=</span> <span class="n">PhysScene</span><span class="o">-&gt;</span><span class="n">GetPhysXScene</span><span class="p">(</span><span class="n">PST_Sync</span><span class="p">);</span>
  <span class="n">SCOPED_SCENE_WRITE_LOCK</span><span class="p">(</span><span class="n">SyncScene</span><span class="p">);</span> <span class="c1">//or SCOPED_SCENE_READ_LOCK if you only need to read</span>

  <span class="c1">//now you can use the PhysX scene in multi-threaded fashion within this function context!</span>
  <span class="c1">//  -Rama</span>
<span class="p">}</span>
</pre>
      </div>
      <p>
       Yay!
      </p>
      <h2>
       <span class="mw-headline" id="UE4_4.15.2B_Entry_PhysX_Points_Into_UE4_Engine">
        UE4 4.15+ Entry PhysX Points Into UE4 Engine
       </span>
      </h2>
      <p>
       As of 4.15 there are new entry points you can use to write a physX-related plugin or game project and interact with UE4's integration of PhysX!
      </p>
      <p>
       "We have now refactored our PhysX Vehicle support as an optional plugin! This makes it easy for games that are not using vehicles to exclude this feature and save disk space and memory. This work also adds several useful physics extension points to Engine (e.g.
       <b>
        OnPhysSceneInit
       </b>
       /Term,
       <b>
        OnPhysSceneStep
       </b>
       ) to make it easier for other developers to write their own similar systems."
      </p>
      <p>
       <a class="external free" href="https://www.unrealengine.com/blog/unreal-engine-4-15-released" rel="nofollow">
        https://www.unrealengine.com/blog/unreal-engine-4-15-released
       </a>
      </p>
      <h2>
       <span class="mw-headline" id="Conclusion">
        Conclusion
       </span>
      </h2>
      <p>
       Using the same UE4 class code, the build cs additions, and #includes I've shown above, you can now write any PhysX code you want!
      </p>
      <p>
       Using the PhysX Scene access code I've shown above, you can do lowest level multi-threaded PhysX coding!
      </p>
      <p>
       Have fun!
      </p>
      <p>
       (
       )
      </p>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
 </body>
</html>