<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <link href="https://www.epicgames.com/tos"/>
  <title>
   Visual Effects: Lesson 01: Material Particle Color - Old UE4 Wiki
  </title>
  <link href="../styles.css" rel="stylesheet"/>
 </head>
 <body>
  <nav id="top-nav">
   <a href="../index.html" title="Home">
    Home
   </a>
  </nav>
  <div class="mw-body" id="content" role="main">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    Visual Effects: Lesson 01: Material Particle Color
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From Epic Wiki
    </div>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <p>
       <br/>
      </p>
      <h2>
       <span class="mw-headline" id="Creating_Materials_for_use_in_Particle_Effects_in_Unreal_Engine_4.0">
        Creating Materials for use in Particle Effects in Unreal Engine 4.0
       </span>
      </h2>
      <p>
       <b>
        Beginner Level
       </b>
      </p>
      <p>
       Setting up your Material with Particle Color for use in Cascade.
      </p>
      <p>
       This quick lesson covers some very basic concepts of material setup for use with particle systems in Unreal Engine 4, and is intended for new users, or those wishing to get an update on new methods used in UE4.
      </p>
      <p>
       For this lesson we will use an unlit translucent material, and properly setup color and alpha blending.
      </p>
      <p>
       First we will start by creating our material by right clicking in the Content Browser and choosing Basic Assets&gt;Material.
      </p>
      <p>
       Name your material
       <i>
        M_Particle_ColorAlpha_Trans_Unlit
       </i>
       .
      </p>
      <p>
       Sometimes I like to label my materials with the blend mode so it is easy for me to see at a glance what the materials blending/lighting is.  It is always possible to get this information by holding your mouse over the material icon as well.  You can make your names longer or shorter at your own discretion. It can be valuable to use keywords in your naming which are easily searchable by team members etc.
      </p>
      <p>
       Open the material by double clicking on it in the Content Browser.
      </p>
      <p>
       In the Material Editor select your material output node.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:313px;">
        <img alt="M ParticleColorAlpha Output.png" class="thumbimage" height="441" src="../assets/visual-effects-lesson-01-material-particle-color/0.png" width="311"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       In the details panel set your Blend Mode to
       <b>
        Translucent
       </b>
       , and Lighting Model to
       <b>
        Unlit
       </b>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:373px;">
        <img alt="Blend Mode To Translucent.png" class="thumbimage" height="285" src="../assets/visual-effects-lesson-01-material-particle-color/1.png" width="371"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Leave the lighting settings to the defaults as we will not be using them for this example.
      </p>
      <p>
       In the grid area of the Material Editor, add a Texture Sample by holding down T and left clicking in the space.
      </p>
      <p>
       <b>
        TIP!
       </b>
       If you have your texture selected in the Content Browser it will automatically assign the texture when you add the node.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:716px;">
        <img alt="TextureSample ParticleColor.png" class="thumbimage" height="456" src="../assets/visual-effects-lesson-01-material-particle-color/2.png" width="714"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now drag off of the color output of the Texture Sample expression, let go of the mouse and begin typing "
       <b>
        multiply
       </b>
       ".  This will filter the list for you; click the multiply text in the drop down to add a multiply node.
      </p>
      <p>
       <b>
        TIP!
       </b>
       You can also press M and left click in the space to quickly drop a multiply node on the graph.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:686px;">
        <img alt="TextureSample ParticleColorMultiply.png" class="thumbimage" height="567" src="../assets/visual-effects-lesson-01-material-particle-color/3.png" width="684"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       In order for Particle Color to properly blend using the color control modules in Cascade we need to multiply our texture’s RGB color output by
       <b>
        Particle Color
       </b>
       .  This essentially tells UE4 we are intending to modify this color in Cascade.  Without this expression, you will be unable to modify your color in Cascade.
      </p>
      <p>
       To add the Particle Color expression drag off of your multiply input and type particlecolor.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:686px;">
        <img alt="TextureMultiplyParticleColor.png" class="thumbimage" height="661" src="../assets/visual-effects-lesson-01-material-particle-color/4.png" width="684"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Next, plug the output of your multiply expression into the
       <b>
        Emissive Color
       </b>
       input of your material.  Note your material preview window has updated.  You can press the plane button to see the material as it will be visible on a sprite in Cascade.  If the plane disappears try rotating around the Z axis in the preview window.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:708px;">
        <img alt="TextureMultiplyParticleColorAttached.png" class="thumbimage" height="467" src="../assets/visual-effects-lesson-01-material-particle-color/5.png" width="706"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:373px;">
        <img alt="MaterialViewportParticleColor.png" class="thumbimage" height="420" src="../assets/visual-effects-lesson-01-material-particle-color/6.png" width="371"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Compile your material using the green apply check icon.
      </p>
      <p>
       Now, in your Content Browser create a new particle system by right clicking and choosing “particle system” from the list. Name it P_ColorAlpha_Blend_Test (something similar to your material name will help you find the asset again if you use this for reference later on).
      </p>
      <p>
       Open the effect by double clicking the Particle System in the Content Browser.
      </p>
      <p>
       Click the required module (yellow) and assign your material in the material field, leave the rest of the options at the defaults for this example.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:426px;">
        <img alt="MaterialParticleColorsDetails.png" class="thumbimage" height="393" src="../assets/visual-effects-lesson-01-material-particle-color/7.png" width="424"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       You will notice now, the sprites in your viewport have changed to match the new material assignment.
      </p>
      <p>
       To make this example easier to view, lets change some settings in the particle system.  First delete the initial velocity module and set your spawn rate to 1, to make it easier to visualize the changes we are going to setup.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:426px;">
        <img alt="MaterialParticleColorsDetails.png" class="thumbimage" height="393" src="../assets/visual-effects-lesson-01-material-particle-color/8.png" width="424"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       <br/>
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:637px;">
        <img alt="ParticleEmitterWithMaterial.png" class="thumbimage" height="487" src="../assets/visual-effects-lesson-01-material-particle-color/9.png" width="635"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       You will notice right now there isn’t much happening visually; to see a change we need to modify our Color Over Life module.  Click the module and open up the color section by clicking the arrows in the Color Over Life section. Keep on clicking and open up all of the sub sections so we can see all of the curve controls.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:437px;">
        <img alt="ParticleColorDetails.png" class="thumbimage" height="519" src="../assets/visual-effects-lesson-01-material-particle-color/10.png" width="435"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       This curve can be visualized by mapping it to the timeline with the icon on the ColorOverLife module.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:223px;">
        <img alt="ColorOverLifeModule.png" class="thumbimage" height="50" src="../assets/visual-effects-lesson-01-material-particle-color/11.png" width="221"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Map the curve to the Curve Editor view, and press the
       <b>
        All
       </b>
       icon.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:249px;">
        <img alt="CurveEditorAll.png" class="thumbimage" height="120" src="../assets/visual-effects-lesson-01-material-particle-color/12.png" width="247"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       This will map your curve to the entire graph so it is easy to visualize.
      </p>
      <p>
       In your Details panel, change the OutValue of the 0 point on your curve to 0,1,0.  This will make your particle turn green, and fade to the original textures RGB color values over the lifespan of the particle.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:431px;">
        <img alt="ParticleColorGreen.png" class="thumbimage" height="371" src="../assets/visual-effects-lesson-01-material-particle-color/13.png" width="429"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Note that your curve in the Curve Editor has changed to reflect the color settings.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:922px;">
        <img alt="ColorCurve.png" class="thumbimage" height="236" src="../assets/visual-effects-lesson-01-material-particle-color/14.png" width="920"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now that we have our color working, let’s setup the alpha, so our sprite fades in and out nicely.
      </p>
      <p>
       Go back to your material using the tabs along the top of your workspace.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:686px;">
        <img alt="ParticleMaterialTab.png" class="thumbimage" height="173" src="../assets/visual-effects-lesson-01-material-particle-color/15.png" width="684"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       This time, try holding down M in the graph area of the Material Editor and left click to place a multiply node.  Note that this does not automatically hook up the expression to your alpha input.  Drag off of the input of the multiply and connect it to the alpha of your texture sample.
      </p>
      <p>
       The Material Editor will display a small green check box icon when you are over a pin to which you can connect.  This makes it much easier to manipulate materials later on when you have complex graphs with the view zoomed out.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:700px;">
        <img alt="MaterialAlphaMultiply.png" class="thumbimage" height="451" src="../assets/visual-effects-lesson-01-material-particle-color/16.png" width="698"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Connect the input of your multiply to the output of your particle color alpha, and connect the output of the multiply to the Opacity of your Material input.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:694px;">
        <img alt="MaterialAlphaMultiplyConnected.png" class="thumbimage" height="466" src="../assets/visual-effects-lesson-01-material-particle-color/17.png" width="692"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Note in the material preview view port, the background grey color has disappeared.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:366px;">
        <img alt="MaterialWithAppliedAlpha.png" class="thumbimage" height="455" src="../assets/visual-effects-lesson-01-material-particle-color/18.png" width="364"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       This is because the Alpha channel of this texture masks out the grey areas, leaving only the X,Y colored elements.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:294px;">
        <img alt="MaterialAlphaMask.png" class="thumbimage" height="283" src="../assets/visual-effects-lesson-01-material-particle-color/19.png" width="292"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Return to Cascade, using the Tab on the top of your workspace.
You can see now, with the default settings on the
       <b>
        Color Over Life
       </b>
       module, your particle is fading out over the life of the sprite.  But for this example we want it to fade in and out.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:425px;">
        <img alt="AlphaParticleColorDark.png" class="thumbimage" height="338" src="../assets/visual-effects-lesson-01-material-particle-color/20.png" width="423"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Click the Color Over Life module and open up the alpha section.
      </p>
      <p>
       Note that we only have 2 points plotted along this curve and to fade this in and out we are going to need at least three.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:433px;">
        <img alt="ParticleAlphaDetails.png" class="thumbimage" height="508" src="../assets/visual-effects-lesson-01-material-particle-color/21.png" width="431"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Click the small arrow all the way to the right of the 1 in the detail panel.
Choose “insert”; this will add a point to the array, between 0 and 1.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:368px;">
        <img alt="InsertAlphaPoint.png" class="thumbimage" height="203" src="../assets/visual-effects-lesson-01-material-particle-color/22.png" width="366"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Set the In Val of this point to .5 and the Out Val to 1; note the changes to your alpha curve in the Curve Editor.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:431px;">
        <img alt="ParticleAlphaDetails3Elements.png" class="thumbimage" height="554" src="../assets/visual-effects-lesson-01-material-particle-color/23.png" width="429"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Now set the Out Val of the 0 point to 0, and your particle will linearly fade in and out over 1 second, because the lifespan of your particle is set to 1.  It is important to note that this curve does exactly what the module name implies; it controls the color over the lifespan of each particle emitted by the emitter.
      </p>
      <p>
       Fading in and out looks better, but it is a harsh linear fade in and out. Let’s set this particle fade in and out in a nicer fashion.  Or as we may say at Epic, ease it in and out.
      </p>
      <p>
       In the Curve Editor, you can see your
       <b>
        ColorOverLife
       </b>
       and
       <b>
        AlphaOverLife
       </b>
       both highlighted yellow. This is because you should currently have the
       <b>
        ColorOverLifeModule
       </b>
       selected. If you don’t, go ahead and select it now, and note the change in the Curve Editor.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:397px;">
        <img alt="OverLifeCurveEditor.png" class="thumbimage" height="360" src="../assets/visual-effects-lesson-01-material-particle-color/24.png" width="395"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       The view is a bit cluttered, because we have both color and alpha in view; let’s go ahead and filter this down to alpha only, by clicking the small yellow box to the right of the ColorOverLife selection.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:821px;">
        <img alt="OverLifeCurveEditorDisableColor.png" class="thumbimage" height="366" src="../assets/visual-effects-lesson-01-material-particle-color/25.png" width="819"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Note that the only curve we see now is the Alpha curve.  To ease this in and out we can hold down Ctrl+Alt and create a marquee selection in the curve editor, grabbing all 3 points on the curve.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:922px;">
        <img alt="LinearAlphaCurve.png" class="thumbimage" height="240" src="../assets/visual-effects-lesson-01-material-particle-color/26.png" width="920"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       With all three points selected, we can smooth out the points along the curve by pressing the Auto/Clamped button.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:358px;">
        <img alt="LinearAlphaCurveAutoClamped.png" class="thumbimage" height="361" src="../assets/visual-effects-lesson-01-material-particle-color/27.png" width="356"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       This yields a much smoother fade in and fade out over the particle’s lifespan, making the effects feel more natural.
      </p>
      <div class="thumb tleft">
       <div class="thumbinner" style="width:922px;">
        <img alt="LinearAlphaCurvedAuto.png" class="thumbimage" height="232" src="../assets/visual-effects-lesson-01-material-particle-color/28.png" width="920"/>
        <div class="thumbcaption">
         <div class="magnify">
         </div>
        </div>
       </div>
      </div>
      <p>
       <br clear="all"/>
      </p>
      <p>
       Try playing with the lifespan of your particles and try moving the points along the curve to different positions.  Adjusting timing and alpha settings can mean the difference between an effect which feels like it has great force and power, and one which feels slightly sluggish and lazy.
      </p>
      <p>
       I hope that gets you more comfortable with controlling color and alpha in Cascade.  Feel free to post any questions regarding this topic in the forums!
      </p>
      <ul>
       <li>
       </li>
      </ul>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
 </body>
</html>